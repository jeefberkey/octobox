---
language: ruby
rvm:
  - 2.5.1

runtime:
  nodePool: shippable_shared_aarch64

integrations:
  hub:
    - integrationName: gcloud
      type: gcloudKey

build:
  ci:
    - docker build -t ruby-2.5.1-alpine-arm https://raw.githubusercontent.com/docker-library/ruby/c9644fe5c95cd71913db348baa41240f05d882b3/2.5/alpine3.7/Dockerfile
    - docker tag ruby-2.5.1-alpine-arm us.gcr.io/jeefme-185614/ruby:2.5.1-alpine

    - docker build -t us.gcr.io/jeefme-185614/octobox:$COMMIT.BUILD_NUMBER .
  post_ci:
    - docker push us.gcr.io/jeefme-185614/octobox:$COMMIT.BUILD_NUMBER
